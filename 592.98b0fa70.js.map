{"version":3,"file":"592.98b0fa70.js","sources":["webpack://nmemonica/./src/components/Form/ChoiceNumberSlider.tsx","webpack://nmemonica/./src/components/Form/SettingsGKanji.tsx","webpack://nmemonica/./src/components/Form/SimpleListMenu.tsx"],"sourcesContent":["import { Slider, Typography } from \"@mui/material\";\nimport PropTypes from \"prop-types\";\nimport React, { useState } from \"react\";\nimport \"../../css/ChoiceNumberSlider.css\";\n\ninterface Marks {\n  value: number;\n  raw: number;\n}\n\ninterface ChoiceNumberSliderProps {\n  initial: number;\n  setChoiceN: (n: number) => void;\n  /** Override choice size in wideMode */\n  wideN?: number;\n  wideMode?: boolean;\n  toggleWide?: () => void;\n}\n\nexport default function ChoiceNumberSlider(props: ChoiceNumberSliderProps) {\n  const [initVal] = useState(props.initial);\n\n  const min = 4;\n  const max = 16;\n  const wide = props.wideN ?? 32;\n\n  let marks: Marks[] = [];\n  let marksMap: Record<string, number> = {};\n\n  for (let x = min; x < max + 1; x++) {\n    const slide = ((x - min) / (max + 1 - min)) * 75;\n    marks = [...marks, { value: slide, raw: x }];\n    marksMap[`r ${slide}`] = x;\n    marksMap[`s ${x}`] = slide;\n  }\n  marks = [...marks, { value: 100, raw: wide }];\n  marksMap[`r 100`] = wide;\n  marksMap[`s ${wide}`] = 100;\n\n  const slideToRaw = (slide: number) => {\n    return marksMap[`r ${slide}`];\n  };\n\n  const slideToRawString = (slide: number) => {\n    return String(slideToRaw(slide));\n  };\n\n  const rawToSlide = (raw: number) => {\n    return marksMap[`s ${raw}`];\n  };\n\n  const handleChange = (newValue: number) => {\n    const prevVal = props.initial;\n    const curVal = slideToRaw(newValue);\n\n    if (curVal !== wide && prevVal !== wide && curVal !== prevVal) {\n      props.setChoiceN(curVal);\n      if (props.wideMode === true && typeof props.toggleWide === \"function\") {\n        props.toggleWide();\n      }\n    } else if (curVal !== wide && prevVal === wide && curVal !== prevVal) {\n      props.setChoiceN(curVal);\n      if (props.wideMode === true && typeof props.toggleWide === \"function\") {\n        props.toggleWide();\n      }\n    } else if (curVal === wide && curVal !== prevVal) {\n      props.setChoiceN(curVal);\n      if (props.wideMode === false && typeof props.toggleWide === \"function\") {\n        props.toggleWide();\n      }\n    }\n  };\n\n  return (\n    <div className=\"kana-slider\">\n      <Typography id=\"discrete-slider-restrict\" gutterBottom>\n        Difficulty\n      </Typography>\n      <Slider\n        defaultValue={rawToSlide(initVal)}\n        valueLabelFormat={slideToRaw}\n        getAriaValueText={slideToRawString}\n        aria-labelledby=\"discrete-slider-restrict\"\n        step={null}\n        valueLabelDisplay=\"auto\"\n        marks={marks}\n        onChangeCommitted={(event, newValue) => {\n          if (typeof newValue === \"number\") {\n            handleChange(newValue);\n          }\n        }}\n      />\n    </div>\n  );\n}\n\nChoiceNumberSlider.propTypes = {\n  initial: PropTypes.number,\n  wideMode: PropTypes.bool,\n  setChoiceN: PropTypes.func,\n  toggleWide: PropTypes.func,\n};\n","import { useDispatch } from \"react-redux\";\n\nimport ChoiceNumberSlider from \"./ChoiceNumberSlider\";\nimport SettingsSwitch from \"./SettingsSwitch\";\nimport SimpleListMenu from \"./SimpleListMenu\";\nimport { buildAction } from \"../../helper/eventHandlerHelper\";\nimport { useConnectKanji } from \"../../hooks/useConnectKanji\";\nimport type { AppDispatch } from \"../../slices\";\nimport {\n  setKanjiBtnN,\n  toggleKanjiFadeInAnswers,\n  toggleKanjiOrdering,\n} from \"../../slices/kanjiSlice\";\nimport { TermSortBy, TermSortByLabel } from \"../../slices/settingHelper\";\n\nexport default function SettingsKanjiGame() {\n  const dispatch = useDispatch<AppDispatch>();\n\n  const {\n    orderType: kanjiOrder,\n    fadeInAnswers: kanjiFadeInAnswers,\n    choiceN: kanjiChoiceN,\n  } = useConnectKanji();\n\n  const el = (\n    <div className=\"outer\">\n      <div className=\"d-flex flex-row justify-content-between\">\n        <div className=\"column-1\"></div>\n        <div className=\"column-2 setting-block\">\n          <div className=\"mb-2\">\n            <SimpleListMenu\n              title={\"Sort by:\"}\n              options={TermSortByLabel}\n              allowed={[\n                TermSortBy.DIFFICULTY,\n                TermSortBy.RANDOM,\n                TermSortBy.VIEW_DATE,\n              ]}\n              initial={kanjiOrder.current}\n              onChange={buildAction(dispatch, toggleKanjiOrdering)}\n            />\n          </div>\n          <div className=\"d-flex justify-content-end p-2 text-end\">\n            <ChoiceNumberSlider\n              initial={kanjiChoiceN}\n              setChoiceN={buildAction(dispatch, setKanjiBtnN)}\n            />\n          </div>\n          <div className=\"d-flex justify-content-end p-2\">\n            <SettingsSwitch\n              active={kanjiFadeInAnswers}\n              action={buildAction(dispatch, toggleKanjiFadeInAnswers)}\n              statusText=\"Fade in answers\"\n            />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  return el;\n}\n","import {\n  IconButton,\n  List,\n  ListItemButton,\n  ListItemText,\n  Menu,\n  MenuItem,\n} from \"@mui/material\";\nimport { KebabHorizontalIcon } from \"@primer/octicons-react\";\nimport classNames from \"classnames\";\nimport PropTypes from \"prop-types\";\nimport React, { useEffect, useRef, useState } from \"react\";\n\ninterface SimpleListMenuProps {\n  /** Whether menu is interdisabled */\n  disabled?: boolean; //\n  /** Whether elipsis and options are horizontally reversed */\n  flip?: boolean;\n  title: string;\n  options: string[];\n  allowed?: number[];\n  initial: number;\n  onChange: (index: number) => void;\n}\n\nexport default function SimpleListMenu(props: SimpleListMenuProps) {\n  const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n  const [selectedIndex, setSelectedIndex] = useState(props.initial);\n\n  const optionsRef = useRef(props.options);\n  const allowedRef = useRef(props.allowed ?? props.options.map((o, i) => i));\n  const options = optionsRef.current;\n  const allowed = allowedRef.current;\n\n  useEffect(() => {\n    setSelectedIndex(props.initial);\n  }, [props.initial]);\n\n  const open = Boolean(anchorEl);\n  const handleClickListItem = (event: React.MouseEvent<HTMLElement>) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  const handleMenuItemClick = (\n    event: React.MouseEvent<HTMLElement>,\n    index: number\n  ) => {\n    setSelectedIndex(index);\n    setAnchorEl(null);\n    props.onChange(index);\n  };\n\n  const handleClose = () => {\n    setAnchorEl(null);\n  };\n\n  return (\n    <div\n      className={classNames({\n        clickable: props.disabled !== true,\n        \"d-flex\": true,\n        \"flex-row-reverse\": props.flip === true ? true : undefined,\n        \"justify-content-end\": true,\n      })}\n    >\n      <List component=\"nav\" disablePadding={true}>\n        <ListItemButton\n          disableGutters={true}\n          disabled={props.disabled === true}\n          id=\"filter-button\"\n          aria-haspopup=\"listbox\"\n          aria-controls=\"filter-menu\"\n          aria-expanded={open ? \"true\" : undefined}\n          onClick={handleClickListItem}\n        >\n          <ListItemText\n            primary={props.title}\n            secondary={options[selectedIndex]}\n            secondaryTypographyProps={{ color: \"unset\" }}\n          />\n        </ListItemButton>\n      </List>\n      <Menu\n        id=\"filter-menu\"\n        anchorEl={anchorEl}\n        open={open}\n        onClose={handleClose}\n        MenuListProps={{\n          \"aria-labelledby\": \"filter-button\",\n          role: \"listbox\",\n        }}\n      >\n        {options.map((option, index) => (\n          <MenuItem\n            key={option}\n            // disabled={index === 0}\n            selected={index === selectedIndex}\n            onClick={(event) => {\n              if (allowed.includes(index)) handleMenuItemClick(event, index);\n            }}\n          >\n            {allowed.includes(index) ? (\n              option\n            ) : (\n              <span className=\"disabled-color\">{option}</span>\n            )}\n          </MenuItem>\n        ))}\n      </Menu>\n\n      <IconButton\n        aria-labelledby=\"filter-button\"\n        sx={{ color: \"unset\", minWidth: \"55px\" }}\n        aria-haspopup=\"listbox\"\n        disabled={props.disabled === true}\n        onClick={handleClickListItem}\n      >\n        <KebabHorizontalIcon\n          size=\"medium\"\n          className={classNames({\n            \"rotate-transition\": true,\n            \"rotate-90\": open,\n          })}\n        />\n      </IconButton>\n    </div>\n  );\n}\n\nSimpleListMenu.propTypes = {\n  disabled: PropTypes.bool,\n  flip: PropTypes.bool,\n  title: PropTypes.string,\n  options: PropTypes.arrayOf(PropTypes.string),\n  initial: PropTypes.number,\n  onChange: PropTypes.func,\n};\n"],"names":["ChoiceNumberSlider","props","raw","initVal","useState","initial","wide","wideN","marks","marksMap","x","max","slide","value","slideToRaw","handleChange","newValue","prevVal","curVal","setChoiceN","wideMode","toggleWide","className","Typography","id","gutterBottom","Slider","defaultValue","valueLabelFormat","getAriaValueText","String","step","valueLabelDisplay","onChangeCommitted","event","propTypes","SettingsKanjiGame","dispatch","useDispatch","orderType","kanjiOrder","fadeInAnswers","kanjiFadeInAnswers","choiceN","kanjiChoiceN","useConnectKanji","title","options","TermSortByLabel","allowed","TermSortBy","current","onChange","buildAction","toggleKanjiOrdering","setKanjiBtnN","active","action","toggleKanjiFadeInAnswers","statusText","SimpleListMenu","anchorEl","setAnchorEl","selectedIndex","setSelectedIndex","optionsRef","useRef","allowedRef","map","o","i","useEffect","open","Boolean","handleClickListItem","currentTarget","handleMenuItemClick","index","clickable","disabled","flip","undefined","List","component","disablePadding","ListItemButton","disableGutters","onClick","ListItemText","primary","secondary","secondaryTypographyProps","color","Menu","onClose","MenuListProps","role","option","MenuItem","selected","includes","IconButton","sx","minWidth","KebabHorizontalIcon","size"],"mappings":"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"}