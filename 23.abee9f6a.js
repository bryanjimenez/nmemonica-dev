(self.webpackChunknmemonica=self.webpackChunknmemonica||[]).push([["23"],{2155:function(e,t,r){"use strict";r.r(t),r.d(t,{GroupItem:function(){return o}});var s=r("10327"),l=r("78615"),i=r("49620"),n=r.n(i),a=r("42157"),c=r.n(a);function o(e){let t=n({[String(e.addlStyle)]:!!e.addlStyle,"p-0 px-2":!0,"font-weight-bold":e.active});return(0,s.jsxs)("div",{className:t,onClick:e.onClick,children:[(0,s.jsx)("span",{className:"p-1",children:e.active?(0,s.jsx)(l.XCircleIcon,{className:"clickable incorrect-color",size:"small","aria-label":"remove"}):(0,s.jsx)(l.PlusCircleIcon,{className:"clickable",size:"small","aria-label":"add"})}),(0,s.jsx)("span",{className:"p-1",children:e.children})]})}r("83169"),o.propTypes={addlStyle:c.string,active:c.bool,onClick:c.func,children:c.string}},44727:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return c}});var s=r("10327"),l=r("49620"),i=r.n(l),n=r("42157"),a=r.n(n);function c(e){let{label:t,value:r}=e;return(0,s.jsxs)("div",{className:i({"mb-3 d-flex flex-row justify-content-end":!0}),children:[(0,s.jsx)("div",{children:t}),(0,s.jsx)("div",{className:"clickable px-2",onClick:()=>{e.onChange(r-1)},children:"-"}),(0,s.jsx)("div",{className:i({"px-2":!0}),children:r}),(0,s.jsx)("div",{className:"clickable px-2",onClick:()=>{e.onChange(r+1)},children:"+"})]})}c.propTypes={value:a.number}},49840:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var s=r("10327"),l=r("40432"),i=r("42565"),n=r("44727"),a=r("3252"),c=r("22719"),o=r("2497"),u=r("10776"),d=r("480"),m=r("93197"),p=r("72530"),h=r("40665"),f=r("37488"),v=r("37362");function x(){let e=(0,l.useDispatch)(),{phraseList:t,phraseGroups:r,sortMethod:x,romajiActive:b,difficultyThreshold:g,activeGroup:j,filterType:y,repetition:T,reinforce:N,spaRepMaxReviewItem:S,includeNew:C,includeReviewed:A}=(0,m.useConnectPhrase)(),k=y.current,w=x.current,I=b.current,R=N.current;0===t.length&&e((0,p.getPhrase)());let F=Object.keys(T).filter(e=>T[e]?.rein===!0);if(t.length<1||Object.keys(r).length<1)return(0,s.jsx)(i.NotReady,{addlStyle:"phrases-settings"});let G=(0,d.getStaleGroups)(r,j);if(G.length>0){let e=Error("Stale phrases active group",{cause:{code:"StalePhraseActiveGrp",value:G}});throw e}let E=(0,s.jsx)("div",{className:"outer",children:(0,s.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,s.jsxs)("div",{className:"column-1",children:[(0,s.jsx)("span",{className:"fs-5 fw-light",children:(0,d.labelOptions)(k,["Phrases Group","Frequency List","NOT_USED_Tags"])}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(a.default,{active:k%2==0,action:(0,u.buildAction)(e,p.togglePhrasesFilter),color:"default",statusText:"Filter by"})}),k===h.TermFilterBy.GROUP&&(0,s.jsx)(v.SetTermGList,{termsGroups:r,termsActive:j,toggleTermActiveGrp:t=>e((0,p.togglePhraseActiveGrp)(t))}),k===h.TermFilterBy.FREQUENCY&&0===F.length&&(0,s.jsx)("div",{className:"fst-italic",children:"No phrases have been chosen"}),k===h.TermFilterBy.FREQUENCY&&F.length>0&&(0,s.jsx)(f.SetTermGFList,{termsActive:j,termsFreq:F,terms:t,removeFrequencyTerm:t=>e((0,p.removeFrequencyPhrase)(t)),toggleTermActiveGrp:t=>e((0,p.togglePhraseActiveGrp)(t))})]}),(0,s.jsxs)("div",{className:"column-2 setting-block",children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(c.default,{title:"Sort by:",options:h.TermSortByLabel,initial:w,allowed:[h.TermSortBy.RANDOM,h.TermSortBy.VIEW_DATE,h.TermSortBy.RECALL],onChange:t=>(h.TermSortBy.RECALL===t&&e((0,p.togglePhrasesReinforcement)(!1)),(0,u.buildAction)(e,p.togglePhrasesOrdering)(t))})}),w===h.TermSortBy.RECALL&&(0,s.jsx)(n.default,{label:"Max review items ",value:S,onChange:t=>{e((0,p.setSpaRepMaxItemReview)(t))}}),(0,s.jsx)("div",{className:"d-flex justify-content-end",children:(0,s.jsx)(o.ThresholdFilterSlider,{threshold:g,setThreshold:(0,u.buildAction)(e,p.setMemorizedThreshold)})}),w===h.TermSortBy.VIEW_DATE&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(a.default,{active:C,action:(0,u.buildAction)(e,p.toggleIncludeNew),statusText:"Staleness +New"})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(a.default,{active:A,action:(0,u.buildAction)(e,p.toggleIncludeReviewed),statusText:"Staleness +Reviewed"})})]}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(a.default,{active:R,action:(0,u.buildAction)(e,p.togglePhrasesReinforcement),disabled:k===h.TermFilterBy.FREQUENCY||w===h.TermSortBy.RECALL,statusText:"Reinforcement"})}),(0,s.jsx)("div",{className:"mb-2",children:(0,s.jsx)(a.default,{active:I,action:(0,u.buildAction)(e,p.togglePhrasesRomaji),statusText:"Romaji"})})]})]})});return E}},22719:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var s=r("10327"),l=r("58093"),i=r("78615"),n=r("49620"),a=r.n(n),c=r("42157"),o=r.n(c),u=r("83169");function d(e){let[t,r]=(0,u.useState)(null),[n,c]=(0,u.useState)(e.initial),o=(0,u.useRef)(e.options),d=(0,u.useRef)(e.allowed??e.options.map((e,t)=>t)),m=o.current,p=d.current;(0,u.useEffect)(()=>{c(e.initial)},[e.initial]);let h=!!t,f=e=>{r(e.currentTarget)},v=(t,s)=>{c(s),r(null),e.onChange(s)};return(0,s.jsxs)("div",{className:a({clickable:!0!==e.disabled,"d-flex":!0,"flex-row-reverse":!0===e.flip||void 0,"justify-content-end":!0}),children:[(0,s.jsx)(l.List,{component:"nav",disablePadding:!0,children:(0,s.jsx)(l.ListItemButton,{disableGutters:!0,disabled:!0===e.disabled,id:"filter-button","aria-haspopup":"listbox","aria-controls":"filter-menu","aria-expanded":h?"true":void 0,onClick:f,children:(0,s.jsx)(l.ListItemText,{primary:e.title,secondary:m[n],secondaryTypographyProps:{color:"unset"}})})}),(0,s.jsx)(l.Menu,{id:"filter-menu",anchorEl:t,open:h,onClose:()=>{r(null)},MenuListProps:{"aria-labelledby":"filter-button",role:"listbox"},children:m.map((e,t)=>(0,s.jsx)(l.MenuItem,{selected:t===n,onClick:e=>{p.includes(t)&&v(e,t)},children:p.includes(t)?e:(0,s.jsx)("span",{className:"disabled-color",children:e})},e))}),(0,s.jsx)(l.IconButton,{"aria-labelledby":"filter-button",sx:{color:"unset",minWidth:"55px"},"aria-haspopup":"listbox",disabled:!0===e.disabled,onClick:f,children:(0,s.jsx)(i.KebabHorizontalIcon,{size:"medium",className:a({"rotate-transition":!0,"rotate-90":h})})})]})}d.propTypes={disabled:o.bool,flip:o.bool,title:o.string,options:o.arrayOf(o.string),initial:o.number,onChange:o.func}},2497:function(e,t,r){"use strict";r.r(t),r.d(t,{ThresholdFilterSlider:function(){return d}});var s=r("10327"),l=r("58093"),i=r("78615"),n=r("42157"),a=r.n(n),c=r("83169"),o=r("75010"),u=r("67402");function d(e){let{threshold:t,setThreshold:r}=e,[n]=(0,c.useState)(Math.abs(t)),a=(0,o.heatMap)(Math.abs(t)/100,.75),d=[{value:u.MEMORIZED_THRLD},{value:u.DIFFICULTY_THRLD}],m=(0,c.useCallback)(()=>{r(-1*t)},[r,t]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"position-relative text-nowrap w-0 fs-x-small",style:{top:"-15px"},children:`Difficulty filter: ${t}`}),(0,s.jsx)(l.Slider,{sx:{color:a},defaultValue:n,marks:d,track:t<0?void 0:"inverted",onChangeCommitted:(e,s)=>{let l=t<0?-1:1;"number"==typeof s&&(0===s?r(Number(l)):r(l*s))},valueLabelDisplay:"auto"}),(0,s.jsx)("div",{className:"mt-2 ms-3 ",onClick:m,children:t<0?(0,s.jsx)(i.SortAscIcon,{}):(0,s.jsx)(i.SortDescIcon,{})})]})}d.propTypes={threshold:a.number,setThreshold:a.func}},37488:function(e,t,r){"use strict";r.r(t),r.d(t,{SetTermGFList:function(){return u}});var s=r("10327"),l=r("78615"),i=r("49620"),n=r.n(i),a=r("42157"),c=r.n(a);function o(e,t,r,i,a){return(0,s.jsxs)("div",{className:n({"p-0 px-2":!0,clickable:e}),onClick:()=>{e&&a(r)},children:[(0,s.jsxs)("span",{className:"p-1",children:[e&&(0,s.jsx)(l.XCircleIcon,{className:"incorrect-color",size:"small","aria-label":"remove"}),!e&&(0,s.jsx)(l.IssueDraftIcon,{size:"small","aria-label":"inactive"})]}),(0,s.jsx)("span",{className:"p-1",children:i})]},r)}function u(e){let t=[],r=e.termsFreq.reduce((r,s)=>{let l=e.terms.find(e=>e.uid===s);return l?r=[...r,l]:t=[...t,s],r},[]),l=r.reduce((e,t)=>{let r=t.grp?t.grp:"undefined";return e[r]?e[r]=[...e[r],t]:e[r]=[t],e},{});return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"fs-5 fw-light",children:"Frequency"}),(0,s.jsx)("div",{children:Object.keys(l).map(t=>{let r=e.termsActive.includes(t);return(0,s.jsxs)("div",{className:"mb-2",children:[(0,s.jsx)("span",{className:n({"font-weight-bold":r}),onClick:()=>e.toggleTermActiveGrp(t),children:t}),(0,s.jsx)("div",{children:l[t].map((t,s)=>o(r,s,t.uid,t.english,e.removeFrequencyTerm))})]},t)})}),t.length>0&&(0,s.jsxs)("div",{className:"mt-5 text-break",children:[(0,s.jsx)("span",{className:"font-weight-bold",children:"Manual cleanup"}),t.map((t,r)=>o(!0,r,t,t,e.removeFrequencyTerm))]})]})}r("83169"),u.propTypes={termsActive:c.array,termsFreq:c.array,terms:c.array,removeFrequencyTerm:c.func,toggleTermActiveGrp:c.func}},37362:function(e,t,r){"use strict";r.r(t),r.d(t,{SetTermGList:function(){return o}});var s=r("10327"),l=r("56596"),i=r.n(l),n=r("42157"),a=r.n(n);r("83169");var c=r("2155");function o(e){return(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"fs-5 fw-light",children:"Groups"}),Object.keys(e.termsGroups).map(t=>{let r=e.termsActive.includes(t);return(0,s.jsxs)("div",{children:[(0,s.jsx)(c.GroupItem,{active:e.termsActive.includes(t),onClick:()=>e.toggleTermActiveGrp(t),children:t}),!r&&i(e.termsGroups[t],e=>{let[,t]=e.split("_");return Number.isInteger(parseInt(t,10))?parseInt(t,10):e}).map(r=>(0,s.jsx)(c.GroupItem,{addlStyle:"ms-3",active:e.termsActive.includes(t+"."+r),onClick:()=>{e.toggleTermActiveGrp(t+"."+r)},children:r},`${t}.${r}`))]},t)})]})}o.propTypes={termsGroups:a.object,termsActive:a.array,toggleTermActiveGrp:a.func}},75010:function(e,t,r){"use strict";r.r(t),r.d(t,{heatMap:function(){return l}});var s=r("40503");function l(e,t=.25){let[r,l,i]=[13,110,256],n=[r,(0,s.lerp)(l,255,e),(0,s.lerp)(i,0,e)],a=[(0,s.lerp)(0,255,e),255,0],c=[255,(0,s.lerp)(255,0,e),0],o=[(0,s.lerp)(n[0],a[0],e),(0,s.lerp)(n[1],a[1],e),(0,s.lerp)(n[2],a[2],e)],u=[(0,s.lerp)(a[0],c[0],e),(0,s.lerp)(a[1],c[1],e),(0,s.lerp)(a[2],c[2],e)],d=[(0,s.lerp)(o[0],u[0],e),(0,s.lerp)(o[1],u[1],e),(0,s.lerp)(o[2],u[2],e)],[m,p,h]=d.map(e=>Math.floor(e)),f=`rgb(${m},${p},${h},${t})`;return f}},93197:function(e,t,r){"use strict";r.r(t),r.d(t,{useConnectPhrase:function(){return i}});var s=r("83169"),l=r("40432");function i(){let[e,t,r]=(0,l.useSelector)(({global:e})=>[e.debug,e.motionThreshold,e.swipeThreshold],l.shallowEqual),{value:i,grpObj:n}=(0,l.useSelector)(({phrases:e})=>e,(e,t)=>e.version===t.version),{repetition:a}=(0,l.useSelector)(({phrases:e})=>e.setting,(e,t)=>e.repTID===t.repTID),[c,o,u]=(0,l.useSelector)(({phrases:e})=>{let{englishSideUp:t,includeNew:r,includeReviewed:s}=e.setting;return[t,r,s]},l.shallowEqual),[d,m,p,h,f,v]=(0,l.useSelector)(({phrases:e})=>{let{reinforce:t,filter:r,ordered:s,romaji:l,difficultyThreshold:i,spaRepMaxReviewItem:n}=e.setting;return[t,r,s,l,i,n]},l.shallowEqual),x=(0,l.useSelector)(({phrases:e})=>{let{activeGroup:t}=e.setting;return t},l.shallowEqual),b=(0,s.useRef)(d);b.current=d;let g=(0,s.useRef)(m);g.current=m;let j=(0,s.useRef)(p);j.current=p;let y=(0,s.useRef)(h);return y.current=h,{englishSideUp:c,repetition:a,difficultyThreshold:f,debugLevel:e,motionThreshold:t,swipeThreshold:r,phraseList:i,phraseGroups:n,activeGroup:x,spaRepMaxReviewItem:v,includeNew:o,includeReviewed:u,reinforce:b,romajiActive:y,filterType:g,sortMethod:j}}}}]);